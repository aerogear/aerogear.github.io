<!DOCTYPE html>
<html lang="en">
  <head>
    <title>AeroGearHttpStub  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script type="text/javascript">
    window.jazzy = {'docset': false}
    if (typeof window.dash != 'undefined') {
      document.documentElement.className += ' dash'
      window.jazzy.docset = true
    }
    if (navigator.userAgent.match(/xcode/i)) {
      document.documentElement.className += ' xcode'
      window.jazzy.docset = true
    }
    </script>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
  </head>
  <body id="reference" class="Swift">
    <a title="AeroGearHttpStub  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p class="header-text"><a href="index.html">AeroGearHttpStub Docs</a> </p>
        <p id="header-links"><a href="https://github.com/aerogear/aerogear-ios-httpstub"><img id="header-icon" src="img/gh.png" height="16px" width="16px" />View on GitHub</a></p>
      </div>
    </header>
    <section id="valence">
      <div class="content-wrapper">
        <p id="hierarchial_navigation">
        <a href="index.html" id="design_resources_link">AeroGearHttpStub Reference</a>
        <img id="carat" src="img/carat.png" height="10px" width="6px" />
        AeroGearHttpStub  Reference
        </p>
      </div>
    </section>
    <div class="content-wrapper">
      <nav class="book-parts">
        <ul class="nav-parts">
          <li class="part-name tasks">
          <a href="Classes.html">Classes</a>
            <ul class="nav-chapters">
              <li class="nav-chapter">
                <a href="Classes/StubResponse.html">StubResponse</a>
              </li>
              <li class="nav-chapter">
                <a href="Classes/StubsManager.html">StubsManager</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <div class="pixel-line"></div>
      <div class="rubber-band-gap"></div>
      <article class="chapter">
      <a name="/"></a>
        <h1 class="chapter-name">AeroGearHttpStub</h1>
        <section>
          <section class="section">
            <div class='readme'><a href='#aerogear_ios_httpstub_a_href_https_travis_ci_org_aerogear_aerogear_ios_httpstub_img_src_https_travis_ci_org_aerogear_aerogear_ios_httpstub_png_alt_build_status_a' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='aerogear_ios_httpstub_a_href_https_travis_ci_org_aerogear_aerogear_ios_httpstub_img_src_https_travis_ci_org_aerogear_aerogear_ios_httpstub_png_alt_build_status_a'>aerogear-ios-httpstub <a href="https://travis-ci.org/aerogear/aerogear-ios-httpstub"><img src="https://travis-ci.org/aerogear/aerogear-ios-httpstub.png" alt="Build Status"></a></h1>
<p class="para">A small library inspired by <a href="https://github.com/AliSoftware/OHHTTPStubs">OHHTTPStubs</a> to stub your network requests written in Swift.</p>
<blockquote>
<p class="para">This module is beta software, it currently supports Xcode 6.1</p></blockquote>
<a href='#example_usage' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='example_usage'>Example Usage</h2>
<a href='#initialize_from_an_nsdata' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='initialize_from_an_nsdata'>Initialize from an NSData</h4>
<pre class="highlight swift"><code><span class="c1">// set up http stub
</span><span class="kt">StubsManager</span><span class="o">.</span><span class="nf">stubRequestsPassingTest</span><span class="p">({</span> <span class="p">(</span><span class="nv">request</span><span class="p">:</span> <span class="kt">NSURLRequest</span><span class="o">!</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="k">in</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">},</span> <span class="nv">withStubResponse</span><span class="p">:(</span> <span class="p">{</span> <span class="p">(</span><span class="nv">request</span><span class="p">:</span> <span class="kt">NSURLRequest</span><span class="o">!</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">StubResponse</span> <span class="k">in</span>
    <span class="k">return</span> <span class="kt">StubResponse</span><span class="p">(</span><span class="nv">data</span><span class="p">:</span><span class="kt">NSData</span><span class="o">.</span><span class="nf">data</span><span class="p">(),</span> <span class="nv">statusCode</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="nv">headers</span><span class="p">:</span> <span class="p">[</span><span class="s">"Content-Type"</span> <span class="p">:</span> <span class="s">"text/json"</span><span class="p">])</span>
<span class="p">}))</span>

<span class="c1">// async test expectation
</span><span class="k">let</span> <span class="nv">registrationExpectation</span> <span class="o">=</span> <span class="nf">expectationWithDescription</span><span class="p">(</span><span class="s">"testStubWithNSURLSessionDefaultConfiguration"</span><span class="p">);</span>

<span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">NSMutableURLRequest</span><span class="p">(</span><span class="kt">URL</span><span class="p">:</span> <span class="kt">NSURL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"http://server.com"</span><span class="p">))</span>

<span class="k">let</span> <span class="nv">config</span> <span class="o">=</span> <span class="kt">NSURLSessionConfiguration</span><span class="o">.</span><span class="nf">defaultSessionConfiguration</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">session</span> <span class="o">=</span> <span class="kt">NSURLSession</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="n">config</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">task</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="nf">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">)</span> <span class="p">{(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
    <span class="kt">XCTAssertNil</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="s">"unexpected error"</span><span class="p">)</span>
    <span class="kt">XCTAssertNotNil</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s">"response should contain data"</span><span class="p">)</span>

    <span class="n">registrationExpectation</span><span class="o">.</span><span class="nf">fulfill</span><span class="p">()</span>
<span class="p">}</span>

<span class="n">task</span><span class="o">.</span><span class="nf">resume</span><span class="p">()</span>

<span class="nf">waitForExpectationsWithTimeout</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nv">handler</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</code></pre>
<a href='#initialize_from_a_file_located_in_either_a_bundle_or_a_documents_directory' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='initialize_from_a_file_located_in_either_a_bundle_or_a_documents_directory'>Initialize from a file located in either a Bundle or a Documents Directory</h4>
<pre class="highlight swift"><code><span class="c1">// set up http stub from a stubbed file located in the test bundle
</span><span class="kt">StubsManager</span><span class="o">.</span><span class="nf">stubRequestsPassingTest</span><span class="p">({</span> <span class="p">(</span><span class="nv">request</span><span class="p">:</span> <span class="kt">NSURLRequest</span><span class="o">!</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="k">in</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">},</span> <span class="nv">withStubResponse</span><span class="p">:(</span> <span class="p">{</span> <span class="p">(</span><span class="nv">request</span><span class="p">:</span> <span class="kt">NSURLRequest</span><span class="o">!</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">StubResponse</span> <span class="k">in</span>
     <span class="k">return</span> <span class="kt">StubResponse</span><span class="p">(</span><span class="nv">filename</span><span class="p">:</span> <span class="s">"mystubbedjson.json"</span><span class="p">,</span> <span class="nv">location</span><span class="p">:</span><span class="o">.</span><span class="kt">Bundle</span><span class="p">(</span><span class="kt">NSBundle</span><span class="p">(</span><span class="nv">forClass</span><span class="p">:</span> <span class="kt">AGURLSessionStubsTests</span><span class="o">.</span><span class="k">self</span><span class="p">)),</span> <span class="nv">statusCode</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="nv">headers</span><span class="p">:</span> <span class="p">[</span><span class="s">"Content-Type"</span> <span class="p">:</span> <span class="s">"text/json"</span><span class="p">])</span>
<span class="p">}))</span>

<span class="c1">// or
// set up http stub from a stubbed file located in the 'Documents' directory
</span><span class="kt">StubsManager</span><span class="o">.</span><span class="nf">stubRequestsPassingTest</span><span class="p">({</span> <span class="p">(</span><span class="nv">request</span><span class="p">:</span> <span class="kt">NSURLRequest</span><span class="o">!</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="k">in</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">},</span> <span class="nv">withStubResponse</span><span class="p">:(</span> <span class="p">{</span> <span class="p">(</span><span class="nv">request</span><span class="p">:</span> <span class="kt">NSURLRequest</span><span class="o">!</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">StubResponse</span> <span class="k">in</span>
     <span class="k">return</span> <span class="kt">StubResponse</span><span class="p">(</span><span class="nv">filename</span><span class="p">:</span> <span class="s">"mystubbedjson.json"</span><span class="p">,</span> <span class="nv">location</span><span class="p">:</span><span class="o">.</span><span class="kt">Documents</span><span class="p">,</span> <span class="nv">statusCode</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="nv">headers</span><span class="p">:</span> <span class="p">[</span><span class="s">"Content-Type"</span> <span class="p">:</span> <span class="s">"text/json"</span><span class="p">])</span>
<span class="p">}))</span>
</code></pre>
<a href='#adding_the_library_to_your_project' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='adding_the_library_to_your_project'>Adding the library to your project</h2>
<p class="para">To add the library in your project, you can either use <a href="http://cocoapods.org">Cocoapods</a> or simply drag the library in your project. See the respective sections below for instructions</p><a href='#using_a_href_http_cocoapods_org_cocoapods_a' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='using_a_href_http_cocoapods_org_cocoapods_a'>Using <a href="http://cocoapods.org">Cocoapods</a></h3>
<p class="para">At this time, Cocoapods support for Swift frameworks is supported in a preview <a href="https://github.com/CocoaPods/CocoaPods/tree/swift">branch</a>. Simply <a href="http://swiftwala.com/cocoapods-is-ready-for-swift/">include a Gemfile</a> in your project pointing to that branch and in your <code>Podfile</code> add:</p><pre class="highlight plaintext"><code>pod 'AGURLSessionStubs'
</code></pre>
<p class="para">and then:
<code>bash
bundle install
bundle exec pod install
</code></p><p class="para">to install your dependencies</p><a href='#drag_the_library_in_your_project' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='drag_the_library_in_your_project'>Drag the library in your project</h3>
<p class="para">To use AGURLSessionStubs to test your iOS applications, follow these 3 easy steps:</p>
<ol>
<li>Clone the aerogear-ios-httpstub repository</li>
<li>Add <code>AGURLSessionStubs.xcodeproj</code> to your test target</li>
<li>Start using it!</li>
</ol>
<a href='#1_clone_the_aerogear_ios_httpstub_repository' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='1_clone_the_aerogear_ios_httpstub_repository'>1. Clone the aerogear-ios-httpstub repository</h4>
<pre class="highlight plaintext"><code>git clone git@github.com:aerogear/aerogear-ios-httpstub.git
</code></pre>
<p class="para">You can alternatively add the project as github submodule to ease configuration for other users. </p><a href='#2_add_code_agurlsessionstubs_xcodeproj_code_to_your_test_target' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='2_add_code_agurlsessionstubs_xcodeproj_code_to_your_test_target'>2. Add <code>AGURLSessionStubs.xcodeproj</code> to your test target</h4>
<p class="para">Right-click on the group containing your application&rsquo;s tests and
select <code>Add Files To YourApp...</code>.</p><p class="para">Choose <code>AGURLSessionStubs.xcodeproj</code></p><p class="para">Once you&rsquo;ve added the Quick project, you should see it in Xcode&rsquo;s project
navigator, grouped with your tests.</p><p class="para"><img src="AGURLSessionStubs_usage.png" alt=""></p><p class="para">See project <a href="https://github.com/aerogear/aerogear-ios-http">aerogear-ios-http</a> as an example using it.</p><p class="para">If you run into any problems, please <a href="http://issues.jboss.org/browse/AEROGEAR">file an issue</a> and join our <a href="https://lists.jboss.org/mailman/listinfo/aerogear-dev">mailing list</a></p></div>
          </section>
        </section>
        <section id="footer">
          <p class="copyright">&copy; 2014 <a class="link" href="https://aerogear.org" target="_blank" rel="external">AeroGear</a>. All rights reserved. (Last updated: 2014-12-17)</p>
          <p class="copyright">Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.0.16</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
