<!doctype html>
<html>
<head>
  <title>AeroGear - AeroGear Security OTP Specification</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">

  <!-- Main styles-->
  <link href="/css/styles.css" rel="stylesheet" media="screen">

  <!-- Syntax highlighting -->
  <link href="/css/syntax.css" rel="stylesheet"> 

  <!-- Icons -->
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="/css/openshift-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <!-- Favicons -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon">

  <script src="//code.jquery.com/jquery-1.9.1.min.js"></script>


  <!-- google analytics -->
  <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-28733717-2']);
      _gaq.push(['_setDomainName', 'aerogear.org']);
      _gaq.push(['_trackPageview']);

      (function () {
          var ga = document.createElement('script');
          ga.type = 'text/javascript';
          ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(ga, s);
      })();
  </script>
  

</head>

<body>    

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/index.html">AeroGear</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        

        <li class="">
          <a href="/">Home</a>
        </li>

        <li class="">
          <a href="/getting-started/overview/">Getting Started</a>
        </li>


        <li class="dropdown ">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Mobile Services<span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="/services/mobile-ci-cd/">Mobile CI/CD</a></li>
              <li><a href="/services/push/">Push Notifications</a></li>
              <li><a href="/services/metrics/">Metrics</a></li>
              <li><a href="/services/runtime-connector/">Runtime Connector</a></li>
              <li><a href="/services/identity-management/">Identity Management</a></li>
              <li><a href="/services/device-security/">Device Security</a></li>
            </ul>
        </li>

        <li class="dropdown ">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Mobile SDKs<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="/sdks/android/">Android</a></li>
            <li><a href="/sdks/cordova/">Cordova</li>
            <li><a href="/sdks/ios/">iOS</a></li>
            <li><a href="/sdks/xamarin/">Xamarin</a></li>
          </ul>
        </li>

        <li class="hidden-sm active">
          <a href="https://docs.aerogear.org">Docs</a>
        </li>
   
        
        <li class="">
          <a href="/community">Community</a>
        </li>
        

        <li class="">
          <a href="/news">News</a>
        </li>
        
      </ul>

    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<section class="main-banner">
  <div class="container">
    
  <h2>Documentation <small>Aerogear API documentation &amp; specifications.</small></h2>

  </div><!-- container -->
</section> <!-- main banner -->


<section class="docs">
  
  <div class="container">
         <ol class="breadcrumb" style="margin:0">
      <li>
        
          <a href="/docs/specs/">Docs</a>
        
      </li>
      <li class="active">AeroGear Security OTP Specification</li>
    </ol>
  </div><!-- container -->


  <div class="container">
    <div class="row">
      
      <div class="col-md-8 col-md-offset-2 post">
      
        <h1>AeroGear Security OTP Specification</h1>
        <div class="sect1">
<h2 id="_aerogear_security_otp_specification">AeroGear Security OTP Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is a initial proposal on having a two factor authentication layer
on mobile applications.</p>
</div>
<div class="sect2">
<h3 id="_references">References</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://tools.ietf.org/html/rfc6238">RFC 6238 - TOTP specification</a></p>
</li>
<li>
<p><a href="http://tools.ietf.org/html/rfc4226">RFC 4226 - HOTP specification</a></p>
</li>
<li>
<p><a href="http://tools.ietf.org/html/rfc2898">RFC 2898 - Password-Based
Cryptography Specification</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_scenarios_v0_0_1">Scenarios - v0.0.1</h3>
<div class="paragraph">
<p><strong>Random Generation</strong>: <em>secrets are generated randomly at provisioning
stage and must be stored immediately and kept secure during their life
cycle. - RFC 4226</em></p>
</div>
<div class="sect3">
<h4 id="_registration">Registration</h4>
<div class="paragraph">
<p>After installing the application, the user will be able to create your
own account. Before the HTTP request is sent to the server, mobile
application applies a key derivation function which generates the secret
shared key (SHA-1, SHA-256 or SHA-512) based on
<a href="http://tools.ietf.org/html/rfc2898">RFC 2898</a>:</p>
</div>
<div class="paragraph">
<p><em>Secret shared key: user data + time + interval</em></p>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>user data: login, password</p>
</li>
<li>
<p>time: current time (UTC)</p>
</li>
<li>
<p>interval: represents the time in seconds, since the elapsed time.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The secret key will be stored on device for the calculation of a
one-time password value. When the first request comes to the server it
runs the same algorithm to generate the secret, store it and validate
the OTP.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../img/aerogear_otp_registrationv0.0.1.png" alt="registration"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_authentication">Authentication</h4>
<div class="paragraph">
<p>After a user has entered the login and password, mobile application will
retrieve the secret from storage for the OTP calculation and send it
back to the server. The server will retrieve the secret locally and
validate the OTP.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../img/aerogear_otp_authenticationv0.0.1.png" alt="authentication"></span></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scenarios">Scenarios</h3>
<div class="paragraph">
<p><strong>Deterministic Generation</strong>: <em>secrets are derived from a master seed,
both at provisioning and verification stages and generated on-the-fly
whenever it is required. - RFC 4226</em></p>
</div>
<div class="sect3">
<h4 id="_registration_2">Registration</h4>
<div class="paragraph">
<p>This scenarios aims to describe a common workflow for JavaScript aplications
and can also be provided to native clients</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../img/aerogear_otp_registrationv0.0.3.png" alt="registration"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_totp_as_a_password_based_key_derivation_password_otp">TOTP as a password-based key derivation (password + OTP)</h4>

</div>
<div class="sect3">
<h4 id="_registration_3">Registration</h4>
<div class="paragraph">
<p><span class="image"><img src="../img/aerogear_otp_registrationv0.0.3_1.png" alt="registration"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_login">Login</h4>
<div class="paragraph">
<p><span class="image"><img src="../img/aerogear_otp_registrationv0.0.3_2.png" alt="registration"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_shared_secret_key_expiration">Shared Secret key expiration</h4>
<div class="paragraph">
<p><span class="image"><img src="../img/aerogear_otp_secret_expirationv0.0.2.jpg" alt="expiration"></span></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_common_questions">Common questions</h3>
<div class="ulist">
<ul>
<li>
<p>How it will affect Android, iOS and JavaScript projects?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These libraries are optional and not a requirement.</p>
</div>
</div>
</div>
</div>
      
      </div><!-- col 8 -->
    </div><!-- row -->
  </div><!-- container -->
</section>



<footer>
  <div class="container">
    <div class="row">
      <div class="col-sm-3">
        <h5>Getting Started</h5>
        <ul class="list-unstyled">
          <li><a href="/getting-started/overview/">Overview</a></li>
          <li><a href="/getting-started/installation-and-configuration/">Installation &amp; Configuration</a></li>
          <li><a href="/getting-started/creating-mobile-apps/">Creating Mobile Apps</a></li>
          <li><a href="/getting-started/enabling-mobile-services/">Enabling Mobile Services</a></li>
        </ul>
      </div><!-- col -->

      <div class="col-sm-3">
        <h5>Mobile Services</h5>
        <ul class="list-unstyled">
         <li><a href="/services/mobile-ci-cd/">Mobile CI/CD</a></li>
         <li><a href="/services/push/">Push Notifications</a></li>
         <li><a href="/services/metrics/">Metrics</a></li>
         <li><a href="/services/runtime-connector/">Runtime Connector</a></li>
         <li><a href="/services/identity-management/">Identity Management</a></li>
         <li><a href="/services/device-security/">Device Security</a></li>
        </ul>
      </div><!-- col -->

      <div class="col-sm-3">
        <h5>Mobile SDKs</h5>
        <ul class="list-unstyled">
         <li><a href="/sdks/android/">Android</a></li>
         <li><a href="/sdks/cordova/">Cordova</li>
         <li><a href="/sdks/ios/">iOS</a></li>
         <li><a href="/sdks/xamarin/">Xamarin</a></li>
        </ul>
      </div><!-- col -->
      
      <div class="col-sm-3">
        <h5>COMMUNITY</h5>
        <ul class="list-unstyled">
          <li><a target="_blank" href="https://github.com/aerogear/">GitHub - Aerogear</a></li>
          <li><a target="_blank" href="https://github.com/aerogearcatalog/">GitHub - Aerogear Catalog</a></li>
          <li><a target="_blank" href="https://issues.jboss.org/browse/AEROGEAR">Jira Repo Issues</a></li>
          <li><a  href="/community/contribution-guide/">Contribution Guide</a></li>
          <li><a target="_blank" href="https://groups.google.com/forum/#!forum/aerogear">Google Group</a></li>
          <li><a href="irc://irc.freenode.net/aerogear">IRC</a></li>
        </ul>
      </div><!-- col -->

      <div class="col-sm-12 follow">
        <h5>FOLLOW US</h5>
        <ul class="list-inline">
          <li><a target="_blank" href="https://www.twitter.com/aerogears"><i class="fa fa-twitter-square"></i> Twitter</a></li>
          <li><a target="_blank" href="https://www.facebook.com/AeroGearProject"><i class="fa fa-facebook-square"></i> Facebook</a></li>
          <li><a target="_blank" href="https://plus.google.com/106588661437153585722/posts"><i class="fa fa-google-plus-square"></i> Google+</a></li>
          <li><a target="_blank" href="/feed.atom"><i class="fa fa-rss-square"></i> Feed</a></li>
        </ul>
        
        <p>AeroGear project is licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a></p>
      </div><!-- col -->
    
    </div><!-- row -->

  </div><!-- container -->

</footer><!-- footer -->

<section class="redhat">
  <div class="container">
    <p class="text-center">
      <a href="http://www.redhat.com/">
        <img src="/img/redhatlogo-wite.png" alt="redhatlogo-wite" width="130">
      </a>
    </p>       
  </div><!-- container -->
</section>


<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<!-- <script src="/bower_components/jquery/dist/jquery.min.js"></script> -->

<!-- Include all compiled plugins (below), or include individual files as needed  -->  
<script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

<!-- My script -->
<script src="/js/script.js"></script>

</body>
</html>