<!DOCTYPE html>
<html lang="en">
  <head>
    <title>ClientSynchronizer Protocol Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset='utf-8'>
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
  </head>
  <body>
    <a name="//apple_ref/swift/Protocol/ClientSynchronizer" class="dashAnchor"></a>
    <a title="ClientSynchronizer Protocol Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="../index.html"> Docs</a> (100% documented)</p>
        <p class="header-right"><a href=""><img src="../img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="../index.html"> Reference</a>
        <img id="carat" src="../img/carat.png" />
        ClientSynchronizer Protocol Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
          <a href="../Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/BackupShadowDocument.html">BackupShadowDocument</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/ClientDocument.html">ClientDocument</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/ClientSyncEngine.html">ClientSyncEngine</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/Document.html">Document</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/InMemoryDataStore.html">InMemoryDataStore</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/ShadowDocument.html">ShadowDocument</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
          <a href="../Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols/ClientSynchronizer.html">ClientSynchronizer</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/DataStore.html">DataStore</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols.html#/s:P12AeroGearSync10Difference">Difference</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/Edit.html">Edit</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/PatchMessage.html">PatchMessage</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/Payload.html">Payload</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            <h1>ClientSynchronizer</h1>
            <p>An instance of this class will be able to handle tasks needed to implement
Differential Synchronization for a specific type of documents.
<br/><br/>
<code>&lt;T&gt;</code> the type of Documents that this synchronizer can handle
<br/>
<code>&lt;D&gt;</code> the type of Edits that this synchronizer can handle
<br/>
<code>&lt;P&gt;</code> the type of PatchMessage that this synchronizer can handle</p>

          </section>
          <section class="section task-group-section">
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FP12AeroGearSync18ClientSynchronizer11patchShadowUS0__US_4Edit_S_12PatchMessage_S1______FQPS0_FTQS3_1D6shadowGCS_14ShadowDocumentQS3_1T__GS5_S6__"></a>
                    <a name="//apple_ref/swift/Method/patchShadow(_:shadow:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FP12AeroGearSync18ClientSynchronizer11patchShadowUS0__US_4Edit_S_12PatchMessage_S1______FQPS0_FTQS3_1D6shadowGCS_14ShadowDocumentQS3_1T__GS5_S6__">patchShadow(_:shadow:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Called when the shadow should be patched. Is called when an update is recieved.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">func</span> <span class="nf">patchShadow</span><span class="p">(</span><span class="nv">edit</span><span class="p">:</span> <span class="kt">D</span><span class="p">,</span> <span class="nv">shadow</span><span class="p">:</span> <span class="kt">ShadowDocument</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">ShadowDocument</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>edit</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the Edit containing the diffs/patches.</p>

                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>shadowDocument</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the ShadowDocument to be patched.</p>

                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>ShadowDocument a new patched shadow document.</p>

                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FP12AeroGearSync18ClientSynchronizer13patchDocumentUS0__US_4Edit_S_12PatchMessage_S1______FQPS0_FTQS3_1D14clientDocumentGCS_14ClientDocumentQS3_1T__GS5_S6__"></a>
                    <a name="//apple_ref/swift/Method/patchDocument(_:clientDocument:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FP12AeroGearSync18ClientSynchronizer13patchDocumentUS0__US_4Edit_S_12PatchMessage_S1______FQPS0_FTQS3_1D14clientDocumentGCS_14ClientDocumentQS3_1T__GS5_S6__">patchDocument(_:clientDocument:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Called when the document should be patched.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">func</span> <span class="nf">patchDocument</span><span class="p">(</span><span class="nv">edit</span><span class="p">:</span> <span class="kt">D</span><span class="p">,</span> <span class="nv">clientDocument</span><span class="p">:</span> <span class="kt">ClientDocument</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">ClientDocument</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>edit</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the Edit containing the diffs/patches.</p>

                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>document</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the ClientDocument to be patched.</p>

                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>ClientDocument a new patched document.</p>

                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FP12AeroGearSync18ClientSynchronizer10clientDiffUS0__US_4Edit_S_12PatchMessage_S1______FQPS0_FTGCS_14ClientDocumentQS3_1T_6shadowGCS_14ShadowDocumentS5___QS3_1D"></a>
                    <a name="//apple_ref/swift/Method/clientDiff(_:shadow:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FP12AeroGearSync18ClientSynchronizer10clientDiffUS0__US_4Edit_S_12PatchMessage_S1______FQPS0_FTGCS_14ClientDocumentQS3_1T_6shadowGCS_14ShadowDocumentS5___QS3_1D">clientDiff(_:shadow:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Produces a Edit containing the changes between updated ShadowDocument and the ClientDocument.
This method would be called when the client receives an update from the server and need
to produce an Edit to be able to patch the ClientDocument.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">func</span> <span class="nf">clientDiff</span><span class="p">(</span><span class="nv">clientDocument</span><span class="p">:</span> <span class="kt">ClientDocument</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">,</span> <span class="nv">shadow</span><span class="p">:</span> <span class="kt">ShadowDocument</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">D</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>shadowDocument</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the ShadowDocument patched with updates from the server</p>

                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>document</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the ClientDocument.</p>

                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>Edit the edit representing the diff between the shadow document and the client document.</p>

                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FP12AeroGearSync18ClientSynchronizer10serverDiffUS0__US_4Edit_S_12PatchMessage_S1______FQPS0_FTGCS_14ClientDocumentQS3_1T_6shadowGCS_14ShadowDocumentS5___QS3_1D"></a>
                    <a name="//apple_ref/swift/Method/serverDiff(_:shadow:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FP12AeroGearSync18ClientSynchronizer10serverDiffUS0__US_4Edit_S_12PatchMessage_S1______FQPS0_FTGCS_14ClientDocumentQS3_1T_6shadowGCS_14ShadowDocumentS5___QS3_1D">serverDiff(_:shadow:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Produces a Edit containing the changes between the updated ClientDocument
and the ShadowDocument.
<br/><br/>
Calling the method is the first step in when starting a client side synchronization. We need to
gather the changes between the updates made by the client and the shadow document.
The produced Edit can then be passed to the server side.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">func</span> <span class="nf">serverDiff</span><span class="p">(</span><span class="nv">serverDocument</span><span class="p">:</span> <span class="kt">ClientDocument</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">,</span> <span class="nv">shadow</span><span class="p">:</span> <span class="kt">ShadowDocument</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">D</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>document</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the ClientDocument containing updates made by the client.</p>

                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>shadowDocument</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the ShadowDocument for the ClientDocument.</p>

                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>Edit the edit representing the diff between the client document and it&rsquo;s shadow document.</p>

                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FP12AeroGearSync18ClientSynchronizer20patchMessageFromJsonUS0__US_4Edit_S_12PatchMessage_S1______FQPS0_FSSGSqQS3_1P_"></a>
                    <a name="//apple_ref/swift/Method/patchMessageFromJson(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FP12AeroGearSync18ClientSynchronizer20patchMessageFromJsonUS0__US_4Edit_S_12PatchMessage_S1______FQPS0_FSSGSqQS3_1P_">patchMessageFromJson(_:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Creates a PatchMessage by parsing the passed-in json.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">func</span> <span class="nf">patchMessageFromJson</span><span class="p">(</span><span class="nv">json</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">P</span><span class="p">?</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>json</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the json representation of a PatchMessage.</p>

                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>PatchMessage the created PatchMessage.</p>

                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FP12AeroGearSync18ClientSynchronizer18createPatchMessageUS0__US_4Edit_S_12PatchMessage_S1______FQPS0_FTSS8clientIdSS5editsGSaQS3_1D__GSqQS3_1P_"></a>
                    <a name="//apple_ref/swift/Method/createPatchMessage(_:clientId:edits:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FP12AeroGearSync18ClientSynchronizer18createPatchMessageUS0__US_4Edit_S_12PatchMessage_S1______FQPS0_FTSS8clientIdSS5editsGSaQS3_1D__GSqQS3_1P_">createPatchMessage(_:clientId:edits:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Creates a new PatchMessage with the with the type of Edit that this
synchronizer can handle.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">func</span> <span class="nf">createPatchMessage</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">clientId</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">edits</span><span class="p">:</span> <span class="p">[</span><span class="kt">D</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">P</span><span class="p">?</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>documentId</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the document identifier for the PatchMessage.</p>

                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>clientId</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the client identifier for the PatchMessage.</p>

                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>edits</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the Edits for the PatchMessage.</p>

                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>PatchMessage the created PatchMessage.</p>

                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FP12AeroGearSync18ClientSynchronizer10addContentUS0__US_4Edit_S_12PatchMessage_S1______FQPS0_FTGCS_14ClientDocumentQS3_1T_9fieldNameSS10objectNodeRSS_T_"></a>
                    <a name="//apple_ref/swift/Method/addContent(_:fieldName:objectNode:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FP12AeroGearSync18ClientSynchronizer10addContentUS0__US_4Edit_S_12PatchMessage_S1______FQPS0_FTGCS_14ClientDocumentQS3_1T_9fieldNameSS10objectNodeRSS_T_">addContent(_:fieldName:objectNode:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Adds the content of the passed in content to the ObjectNode.
<br/><br/>
When a client initially adds a document to the engine it will also be sent across the
wire to the server. Before sending, the content of the document has to be added to the
JSON message payload. Different implementation will require different content types that
the engine can handle and this give them control over how the content is added to the JSON
string representation.
<br/><br/>
For example, a ClientEngine that stores simple text will just add the contents as a String,
but one that stores JsonNode object will want to add its content as an object.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">func</span> <span class="nf">addContent</span><span class="p">(</span><span class="nv">content</span><span class="p">:</span><span class="kt">ClientDocument</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">,</span> <span class="nv">fieldName</span><span class="p">:</span><span class="kt">String</span><span class="p">,</span> <span class="k">inout</span> <span class="nv">objectNode</span><span class="p">:</span><span class="kt">String</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>content</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the content to be added.</p>

                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>objectNode</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>as a string to add the content to.</p>

                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>fieldName</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the name of the field.</p>

                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </section>
        </section>
        <section id="footer">
          <p>&copy; 2015 <a class="link" href="" target="_blank" rel="external"></a>. All rights reserved. (Last updated: 2015-06-11)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.2.1</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
