<!doctype html>
<html>
<head>
  <title>AeroGear - AeroGear Android Pagination</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">

  <!-- Main styles-->
  <link href="/css/styles.css" rel="stylesheet" media="screen">

  <!-- Syntax highlighting -->
  <link href="/css/syntax.css" rel="stylesheet"> 

  <!-- Icons -->
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="/css/openshift-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <!-- Favicons -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon">

  <script src="//code.jquery.com/jquery-1.9.1.min.js"></script>


  <!-- google analytics -->
  <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-28733717-2']);
      _gaq.push(['_setDomainName', 'aerogear.org']);
      _gaq.push(['_trackPageview']);

      (function () {
          var ga = document.createElement('script');
          ga.type = 'text/javascript';
          ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(ga, s);
      })();
  </script>
  

</head>

<body>    

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/index.html">AeroGear</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        

        <li class="">
          <a href="/">Home</a>
        </li>

        <li class="">
          <a href="/getting-started/overview/">Getting Started</a>
        </li>


        <li class="dropdown ">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Mobile Services<span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="/services/mobile-ci-cd/">Mobile CI/CD</a></li>
              <li><a href="/services/push/">Push Notifications</a></li>
              <li><a href="/services/metrics/">Metrics</a></li>
              <li><a href="/services/runtime-connector/">Runtime Connector</a></li>
              <li><a href="/services/identity-management/">Identity Management</a></li>
              <li><a href="/services/device-security/">Device Security</a></li>
            </ul>
        </li>

        <li class="dropdown ">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Mobile SDKs<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="/sdks/android/">Android</a></li>
            <li><a href="/sdks/cordova/">Cordova</li>
            <li><a href="/sdks/ios/">iOS</a></li>
            <li><a href="/sdks/xamarin/">Xamarin</a></li>
          </ul>
        </li>

        <li class="hidden-sm ">
          <a href="https://docs.aerogear.org">Docs</a>
        </li>
   
        
        <li class="">
          <a href="/community">Community</a>
        </li>
        

        <li class="">
          <a href="/news">News</a>
        </li>
        
      </ul>

    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<section class="main-banner">
  <div class="container">
    
  <h2>Aerogear Guides <small>Tutorials to help get you off and running.</small></h2>

  </div><!-- container -->
</section> <!-- main banner -->


<section class="guides">
  
  <div class="container">
         <ol class="breadcrumb" style="margin:0">
      <li>
        
          <a href="/getstarted/guides/">Guides</a>
        
      </li>
      <li class="active">AeroGear Android Pagination</li>
    </ol>
  </div><!-- container -->


  <div class="container">
    <div class="row">
      
      <div class="col-md-8 col-md-offset-2 post">
      
        <h1>AeroGear Android Pagination</h1>
        <div class="paragraph">
<p>The Android AeroGear libraries implement paging as defined in <a href="/docs/specs/aerogear-client-paging/">the pagination spec</a>.  We also have common use cases for the basic tasks in the Android sections of the  <a href="/docs/specs/aerogear-client-paging-usage/">paging usage document.</a></p>
</div>
<div class="paragraph">
<p>These two resources should be enough to get you up and running with Aerogear controller based services.  However, if you have special requirements or legacy services AeroGear's pagination framework can also be extended to support some pretty gnarly use cases.</p>
</div>
<div class="paragraph">
<p>AeroGear ships with support for selecting data from the server response and using that data as a relative URI for locations of the "next" and "previous" pages of data.  You can enable paging by configuring a <a href="/docs/specs/aerogear-android-pipe/org/jboss/aerogear/android/pipe/paging/PageConfig.html"><strong>PageConfig</strong></a> object and setting it on the Pipe using <code>PipeConfiguration.pageConfig</code>.  When this option is enabled, <code>Pipe.read</code> and <code>Pipe.readWithFilter</code> will pass <a href="/docs/specs/aerogear-android-pipe/org/jboss/aerogear/android/pipe/paging/PagedList.html"><strong>PagedList</strong></a> instances to <code>Callback.onSuccess</code> instead of plain Lists.  You can call <code>PagedList.next</code> and <code>PagedList.previous</code> for load the next and previous data sets respectively.</p>
</div>
<div class="paragraph">
<p>Let's say we have a service which returns a page of data in the following format:</p>
</div>
<div class="listingblock">
<div class="title">Response</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
    "data": {
        "after": "?after=t3",
        "before": ?before=t1,
        "children": [
                {"data":"data1"},
                {"data":"data2"},
                {"data":"data3"},
                {"data":"data4"}
        ]
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The 'after' parameter defines the page of data which comes after the current page.  The 'before' parameter likewise defines the page which comes before the page of data.  If these fields are relative URIs, AeroGear can use them for paging data.</p>
</div>
<div class="paragraph">
<p>The <a href="/docs/specs/aerogear-android/org/jboss/aerogear/android/pipe/paging/PageConfig.html"><strong>PageConfig</strong></a> object has parameters for setting WHERE paging location data is (<code>pageConfig.setMetadataLocation</code>), and which fields correspond to which data <code>pageConfig.setNextIdentifier</code>, <code>pageConfig.setPreviousIdentifier</code>, and several other parameters specified in the JavaDoc.</p>
</div>
<div class="listingblock">
<div class="title">ExampleApplication.java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">void onCreate() {
     pipeline = new Pipeline(BASE_URL);

     PageConfig pageConfig = new PageConfig();
     pageConfig.setLimitValue(25);
     pageConfig.setMetadataLocation(PageConfig.MetadataLocations.BODY);
     pageConfig.setNextIdentifier("data.after");
     pageConfig.setPreviousIdentifier("data.before");

     MarshallingConfig marshallingConfig = new MarshallingConfig();
     marshallingConfig.setDataRoot("data.children")

     ResponseParser responseParser = new GsonResponseParser();
     responseParser.setMarshallingConfig(marshallingConfig);

     RestfulPipeConfiguration config = PipeManager.config("listing", RestfulPipeConfiguration.class)
                .withUrl(BASE_URL)
                .responseParser(responseParser))
                .pageConfig(pageConfig);

     Pipe&lt;Data&gt; pipe = config.forClass(Data.class);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And now when we call <code>read</code> or <code>readWithFilter</code> our <a href="/docs/specs/aerogear-android-core/org/jboss/aerogear/android/core/Callback.html"><strong>CallBack</strong></a>'s onSuccess method will be passed a <a href="/docs/specs/aerogear-android-pipe/org/jboss/aerogear/android/pipe/paging/PagedList.html"><strong>PagedList</strong></a> instance.</p>
</div>
<div class="listingblock">
<div class="title">ReadCallback.java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class ReadCallback extends AbstractActivityCallback&lt;List&lt;Data&gt;&gt; {
    public void onSuccess(List&lt;Data&gt; data) {
        ExampleActivity activity = getActivity();
        activity.setData((PagedList&lt;Data&gt;) data);
        activity.setListAdapter(new ArrayAdapter&lt;Data&gt;(activity,
                android.R.layout.simple_list_item_activated_1,
                android.R.id.text1,
                data));
    }

    public void onFailure(Exception e) {
	//Handle error
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="/docs/specs/aerogear-android-pipe/org/jboss/aerogear/android/pipe/paging/PagedList..html"><strong>PagedList</strong></a> has  <code>next</code> and <code>previous</code> methods.  Both of these methods consume a <strong>Callback</strong> and call <code>Pipe.readWithFilter</code> with a <strong>ReadFilter</strong> object designed to reference the particular page requested and the callback provided to the method on <a href="/docs/specs/aerogear-android-pipe/org/jboss/aerogear/android/pipe/paging/PagedList.html"><strong>PagedList</strong></a></p>
</div>
<div class="listingblock">
<div class="title">ExampleActivity</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">    public void nextPressed(View button) {
        data.next(readCallback);
    }

    public void previousPressed(View button) {
        data.previous(readCallback);
    }</code></pre>
</div>
</div>
      
      </div><!-- col 8 -->
    </div><!-- row -->
  </div><!-- container -->
</section>



<footer>
  <div class="container">
    <div class="row">
      <div class="col-sm-3">
        <h5>Getting Started</h5>
        <ul class="list-unstyled">
          <li><a href="/getting-started/overview/">Overview</a></li>
          <li><a href="/getting-started/installation-and-configuration/">Installation &amp; Configuration</a></li>
          <li><a href="/getting-started/creating-mobile-apps/">Creating Mobile Apps</a></li>
          <li><a href="/getting-started/enabling-mobile-services/">Enabling Mobile Services</a></li>
        </ul>
      </div><!-- col -->

      <div class="col-sm-3">
        <h5>Mobile Services</h5>
        <ul class="list-unstyled">
         <li><a href="/services/mobile-ci-cd/">Mobile CI/CD</a></li>
         <li><a href="/services/push/">Push Notifications</a></li>
         <li><a href="/services/metrics/">Metrics</a></li>
         <li><a href="/services/runtime-connector/">Runtime Connector</a></li>
         <li><a href="/services/identity-management/">Identity Management</a></li>
         <li><a href="/services/device-security/">Device Security</a></li>
        </ul>
      </div><!-- col -->

      <div class="col-sm-3">
        <h5>Mobile SDKs</h5>
        <ul class="list-unstyled">
         <li><a href="/sdks/android/">Android</a></li>
         <li><a href="/sdks/cordova/">Cordova</li>
         <li><a href="/sdks/ios/">iOS</a></li>
         <li><a href="/sdks/xamarin/">Xamarin</a></li>
        </ul>
      </div><!-- col -->
      
      <div class="col-sm-3">
        <h5>COMMUNITY</h5>
        <ul class="list-unstyled">
          <li><a target="_blank" href="https://github.com/aerogear/">GitHub - Aerogear</a></li>
          <li><a target="_blank" href="https://github.com/aerogearcatalog/">GitHub - Aerogear Catalog</a></li>
          <li><a target="_blank" href="https://issues.jboss.org/browse/AEROGEAR">Jira Repo Issues</a></li>
          <li><a  href="/community/contribution-guide/">Contribution Guide</a></li>
          <li><a target="_blank" href="https://groups.google.com/forum/#!forum/aerogear">Google Group</a></li>
          <li><a href="irc://irc.freenode.net/aerogear">IRC</a></li>
        </ul>
      </div><!-- col -->

      <div class="col-sm-12 follow">
        <h5>FOLLOW US</h5>
        <ul class="list-inline">
          <li><a target="_blank" href="https://www.twitter.com/aerogears"><i class="fa fa-twitter-square"></i> Twitter</a></li>
          <li><a target="_blank" href="https://www.facebook.com/AeroGearProject"><i class="fa fa-facebook-square"></i> Facebook</a></li>
          <li><a target="_blank" href="https://plus.google.com/106588661437153585722/posts"><i class="fa fa-google-plus-square"></i> Google+</a></li>
          <li><a target="_blank" href="/feed.atom"><i class="fa fa-rss-square"></i> Feed</a></li>
        </ul>
        
        <p>AeroGear project is licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a></p>
      </div><!-- col -->
    
    </div><!-- row -->

  </div><!-- container -->

</footer><!-- footer -->

<section class="redhat">
  <div class="container">
    <p class="text-center">
      <a href="http://www.redhat.com/">
        <img src="/img/redhatlogo-wite.png" alt="redhatlogo-wite" width="130">
      </a>
    </p>       
  </div><!-- container -->
</section>


<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<!-- <script src="/bower_components/jquery/dist/jquery.min.js"></script> -->

<!-- Include all compiled plugins (below), or include individual files as needed  -->  
<script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

<!-- My script -->
<script src="/js/script.js"></script>

</body>
</html>